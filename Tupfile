
CFLAGS += -Wno-main
CPPFLAGS += -I. -DLM3S3748=1 -mcpu=cortex-m3 -include config/lm3s.h

CC = arm-none-eabi-gcc

LDSCRIPT = ld/lm3s.lds
LDFLAGS += -L ld -T $(LDSCRIPT) -nostartfiles

src-@(CHIP_LM3S) += lm3s/clock.c lm3s/adc.c
src-y += init_vector.c init.c lm3s/adc.c lm3s/clock.c main.c

include_rules

: foreach $(src-y) |> !cc  |> %f.o  {obj}
: foreach ld/*.lds.S |> !cpp_lds |> ld/%B {lds}
: {obj} | {lds} |> !ccld |> main.elf
