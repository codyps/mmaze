
CFLAGS += -Wno-main
CPPFLAGS += -I. -mcpu=@(CPU) -include config/@(CHIP).h

CC = arm-none-eabi-gcc

LDFLAGS += -T ld/armv7m.lds -nostartfiles

src-y += init_vector.c init.c
src-y += @(APP)

include_rules

: foreach $(src-y) |> !cc  |> %f.o  {obj}
: foreach ld/*.lds.S |> !cpp_lds |> ld/%B {lds}
: {obj} | {lds} |> !ccld |> main.elf
